!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t=t||self).KldAffine={})}(this,function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var s=0;s<i.length;s++){var n=i[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,i,n){return i&&s(t.prototype,i),n&&s(t,n),t}var e=function(){function t(s,n){i(this,t),this.x=void 0!==s?s:0,this.y=void 0!==n?n:0}return n(t,[{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"add",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new this.constructor(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t){return new this.constructor(this.x*t,this.y*t)}},{key:"divide",value:function(t){return new this.constructor(this.x/t,this.y/t)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"precisionEquals",value:function(t,i){return Math.abs(this.x-t.x)<i&&Math.abs(this.y-t.y)<i}},{key:"lerp",value:function(t,i){var s=1-i;return new this.constructor(this.x*s+t.x*i,this.y*s+t.y*i)}},{key:"distanceFrom",value:function(t){var i=this.x-t.x,s=this.y-t.y;return Math.sqrt(i*i+s*s)}},{key:"min",value:function(t){return new this.constructor(Math.min(this.x,t.x),Math.min(this.y,t.y))}},{key:"max",value:function(t){return new this.constructor(Math.max(this.x,t.x),Math.max(this.y,t.y))}},{key:"transform",value:function(t){return new this.constructor(t.a*this.x+t.c*this.y+t.e,t.b*this.x+t.d*this.y+t.f)}},{key:"toString",value:function(){return"point("+this.x+","+this.y+")"}}]),t}(),h=function(){function t(s,n){i(this,t),this.x=void 0!==s?s:0,this.y=void 0!==n?n:0}return n(t,[{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"magnitude",value:function(){return this.x*this.x+this.y*this.y}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"determinant",value:function(t){return this.x*t.y-this.y*t.x}},{key:"unit",value:function(){return this.divide(this.length())}},{key:"add",value:function(t){return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new this.constructor(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t){return new this.constructor(this.x*t,this.y*t)}},{key:"divide",value:function(t){return new this.constructor(this.x/t,this.y/t)}},{key:"angleBetween",value:function(t){var i=this.dot(t)/(this.length()*t.length());i=Math.max(-1,Math.min(i,1));var s=Math.acos(i);return this.cross(t)<0?-s:s}},{key:"perp",value:function(){return new this.constructor(-this.y,this.x)}},{key:"perpendicular",value:function(t){return this.subtract(this.project(t))}},{key:"project",value:function(t){var i=this.dot(t)/t.dot(t);return t.multiply(i)}},{key:"transform",value:function(t){return new this.constructor(t.a*this.x+t.c*this.y,t.b*this.x+t.d*this.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"precisionEquals",value:function(t,i){return Math.abs(this.x-t.x)<i&&Math.abs(this.y-t.y)<i}},{key:"toString",value:function(){return"vector("+this.x+","+this.y+")"}}],[{key:"fromPoints",value:function(i,s){return new t(s.x-i.x,s.y-i.y)}}]),t}(),r=function(){function t(s,n,e,h,r,u){i(this,t),this.a=void 0!==s?s:1,this.b=void 0!==n?n:0,this.c=void 0!==e?e:0,this.d=void 0!==h?h:1,this.e=void 0!==r?r:0,this.f=void 0!==u?u:0}return n(t,[{key:"multiply",value:function(t){return this.isIdentity()?t:t.isIdentity()?this:new this.constructor(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}},{key:"inverse",value:function(){if(this.isIdentity())return this;var t=this.a*this.d-this.b*this.c;if(0===t)throw new Error("Matrix is not invertible");var i=1/t,s=this.f*this.c-this.e*this.d,n=this.e*this.b-this.f*this.a;return new this.constructor(this.d*i,-this.b*i,-this.c*i,this.a*i,s*i,n*i)}},{key:"translate",value:function(t,i){return new this.constructor(this.a,this.b,this.c,this.d,this.a*t+this.c*i+this.e,this.b*t+this.d*i+this.f)}},{key:"scale",value:function(t){return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.e,this.f)}},{key:"scaleAt",value:function(t,i){var s=i.x-t*i.x,n=i.y-t*i.y;return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.a*s+this.c*n+this.e,this.b*s+this.d*n+this.f)}},{key:"scaleNonUniform",value:function(t,i){return new this.constructor(this.a*t,this.b*t,this.c*i,this.d*i,this.e,this.f)}},{key:"scaleNonUniformAt",value:function(t,i,s){var n=s.x-t*s.x,e=s.y-i*s.y;return new this.constructor(this.a*t,this.b*t,this.c*i,this.d*i,this.a*n+this.c*e+this.e,this.b*n+this.d*e+this.f)}},{key:"rotate",value:function(t){var i=Math.cos(t),s=Math.sin(t);return new this.constructor(this.a*i+this.c*s,this.b*i+this.d*s,this.a*-s+this.c*i,this.b*-s+this.d*i,this.e,this.f)}},{key:"rotateAt",value:function(t,i){var s=Math.cos(t),n=Math.sin(t),e=i.x,h=i.y,r=this.a*s+this.c*n,u=this.b*s+this.d*n,a=this.c*s-this.a*n,o=this.d*s-this.b*n;return new this.constructor(r,u,a,o,(this.a-r)*e+(this.c-a)*h+this.e,(this.b-u)*e+(this.d-o)*h+this.f)}},{key:"rotateFromVector",value:function(t){var i=t.unit(),s=i.x,n=i.y;return new this.constructor(this.a*s+this.c*n,this.b*s+this.d*n,this.a*-n+this.c*s,this.b*-n+this.d*s,this.e,this.f)}},{key:"flipX",value:function(){return new this.constructor(-this.a,-this.b,this.c,this.d,this.e,this.f)}},{key:"flipY",value:function(){return new this.constructor(this.a,this.b,-this.c,-this.d,this.e,this.f)}},{key:"skewX",value:function(t){var i=Math.tan(t);return new this.constructor(this.a,this.b,this.c+this.a*i,this.d+this.b*i,this.e,this.f)}},{key:"skewY",value:function(t){var i=Math.tan(t);return new this.constructor(this.a+this.c*i,this.b+this.d*i,this.c,this.d,this.e,this.f)}},{key:"isIdentity",value:function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}},{key:"isInvertible",value:function(){return this.a*this.d-this.b*this.c!=0}},{key:"getScale",value:function(){return{scaleX:Math.sqrt(this.a*this.a+this.c*this.c),scaleY:Math.sqrt(this.b*this.b+this.d*this.d)}}},{key:"getDecomposition",value:function(){var t=.5*(this.a+this.d),i=.5*(this.a-this.d),s=.5*(this.b+this.c),n=.5*(this.b-this.c),e=Math.sqrt(t*t+n*n),h=Math.sqrt(i*i+s*s),r=e+h,u=e-h,a=Math.atan2(s,i),o=Math.atan2(n,t),c=.5*(o-a),y=.5*(o+a);return{translation:this.constructor.translation(this.e,this.f),rotation:this.constructor.rotation(y),scale:this.constructor.nonUniformScaling(r,u),rotation0:this.constructor.rotation(c)}}},{key:"equals",value:function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f}},{key:"precisionEquals",value:function(t,i){return Math.abs(this.a-t.a)<i&&Math.abs(this.b-t.b)<i&&Math.abs(this.c-t.c)<i&&Math.abs(this.d-t.d)<i&&Math.abs(this.e-t.e)<i&&Math.abs(this.f-t.f)<i}},{key:"toString",value:function(){return"matrix("+[this.a,this.b,this.c,this.d,this.e,this.f].join(",")+")"}}],[{key:"translation",value:function(i,s){return new t(1,0,0,1,i,s)}},{key:"scaling",value:function(i){return new t(i,0,0,i,0,0)}},{key:"scalingAt",value:function(i,s){return new t(i,0,0,i,s.x-s.x*i,s.y-s.y*i)}},{key:"nonUniformScaling",value:function(i,s){return new t(i,0,0,s,0,0)}},{key:"nonUniformScalingAt",value:function(i,s,n){return new t(i,0,0,s,n.x-n.x*i,n.y-n.y*s)}},{key:"rotation",value:function(i){var s=Math.cos(i),n=Math.sin(i);return new t(s,n,-n,s,0,0)}},{key:"rotationAt",value:function(i,s){var n=Math.cos(i),e=Math.sin(i);return new t(n,e,-e,n,s.x-s.x*n+s.y*e,s.y-s.y*n-s.x*e)}},{key:"rotationFromVector",value:function(i){var s=i.unit(),n=s.x,e=s.y;return new t(n,e,-e,n,0,0)}},{key:"xFlip",value:function(){return new t(-1,0,0,1,0,0)}},{key:"yFlip",value:function(){return new t(1,0,0,-1,0,0)}},{key:"xSkew",value:function(i){return new t(1,0,Math.tan(i),1,0,0)}},{key:"ySkew",value:function(i){return new t(1,Math.tan(i),0,1,0,0)}}]),t}();r.IDENTITY=new r,r.IDENTITY.isIdentity=function(){return!0},t.Matrix2D=r,t.Point2D=e,t.Vector2D=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index-umd.min.js.map
